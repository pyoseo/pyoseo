# these instructions can be used to generate a UML Sequence Diagram for the 
# pyoseo Submit operation.
# They should be used with the www.websequencediagrams.com online editor

title pyoseo Submit Operation

participant "Client" as client
participant "web server" as ws
participant "django" as dj
participant "oseoserver" as oseo
participant "Submit" as submit
participant "database" as db
participant "celery daemon" as cel

client -> ws: OSEO Submit(notification=None)
activate client
activate ws
ws -> dj: oseo_endpoint(request)
activate dj
dj -> oseo: process_request(request)
activate oseo
oseo -> oseo: authenticate_request()
oseo -> submit: process_request(request_data)
activate submit
submit -> db: save_order()
activate db
db -->> submit: order_id
deactivate db
submit ->> cel: process_order(order_id)
activate cel
deactivate cel
submit -->> oseo: result
deactivate submit
oseo -> oseo: wrap_soap(result)
oseo -->> dj: SubmitResponse
deactivate oseo
dj -->> ws: HttpResponse
deactivate dj
ws -->> client: OSEO SubmitResponse
deactivate client
deactivate ws
cel -> cel: process_order(order_id)
activate cel
cel -> db: get_order_details(order_id)
activate db
db -->> cel: order_details
cel -> db: order_status_changed(order_id,\nstatus)
deactivate db
deactivate cel

